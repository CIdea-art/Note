

# 技术角度

1. 连接超时

   数据量大，处理时间久，用户等待下载的连接容易超时。

   异步执行任务，主动通知用户结果（webSocket）或用户轮询。

   异步方案

   - job任务处理中心
   - 队列，如mq

   使用异步又需要OSS系统存储任务执行完生成的文件，用户从OSS系统下载文件。

2. OOM

   一次性读表写到内存必然OOM，且查询慢

   分页读取，文件追加写

3. 其它

   - sheet最大1048576行，超过时换一个sheet保存

# 产品角度

- 条件筛选，配置导出数量，大部分用户不需要百万级的表格，只需要筛选过的

# 参考文献

[SpringBoot 实现 Excel 导入导出，百万数据量，性能爆表！]: https://mp.weixin.qq.com/s/TE22AqDnP88FqrCv_fYCZQ

